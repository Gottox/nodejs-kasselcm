<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/moon.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
		<style>
			.pro {
				list-style-image: url('img/pro.png');
			}
			.con {
				list-style-image: url('img/con.png');
			}
			.svg {
				border:none !important;
				background:transparent !important;
				vertical-align: middle !important;
				box-shadow:0 0 0 !important;
			}
			.current-fragment {
				opacity: 1 !important;
				visibility: visible !important;
			}
			.current-grow {
				opacity: 0.9 !important;
			}
			.current-fragment.current-grow {
				transform: scale( 1.3 );
				opacity: 1 !important
			}
			.slide-number {
				font-size:20px !important;
			}
		</style>

	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<section>
						<img width=200 src="img/rocket.svg" class="svg">
						<h1>j2js <small>space program</small></h1>
						Enno Boland
					</section>

					<section>
						<h2>Agenda</h2>
						<ul>
							<li class=fragment>Einführung</li>
							<li class=fragment>Architektur</li>
							<li class=fragment>Demo</li>
							<li class=fragment>Ausblick</li>
						</ul>
					</section>
				</section>

				<section>
					<section>
						<img width=400 src="img/sputnik.svg" class="svg">
						<h1>Einführung</h1>
					</section>

					<section>
						<div style="float:left">
							<img width=300 src="img/planet_java.svg" class="svg">
							<h2>Java</h2>
						</div>
						<ul>
							<li class="pro fragment">breites Anwendungsfeld</li>
							<li class="pro fragment">verbreitet</li>
							<li class="pro fragment">stark typisierte Sprache</li>
							<li class="con fragment">funktioniert nicht (mehr) im Browser</li>
							<li class="con fragment">schlecht für Prototyping<br>komplexer Anwendungen</li>
						</ul>
					</section>

					<section>
						<div style="float:left">
							<img width=300 src="img/planet_javascript.svg" class="svg">
							<h2>JavaScript</h2>
						</div>
						<ul style="text-align:left;">
							<li class="pro fragment">breites Anwendungsfeld</li>
							<li class="pro fragment">verbreitet</li>
							<li class="pro fragment">gutes Tooling</li>
							<li class="pro fragment">schnelle Entwicklung von Prototypen</li>
							<li class="con fragment">skaliert schlecht</li>
							<li class="con fragment">kein Typensystem</li>
							<li class="con fragment"><tt>[] == "" =&gt; true</tt></li>
						</ul>
					</section>

					<section>
						<h2 style="float:left" class="fragment">
							<img width=300 src="img/planet_java.svg" class="svg"><br>
							JAVA
						</h2>
						<h2 style="float:right" class="fragment">
							<img width=300 src="img/planet_javascript.svg" class="svg"><br>
							JavaScript
						</h2>

						<span style="font-size:500%" class="fragment">
							&#8669;
						</span><br>
						<h1 class="fragment">
							<img height=250 src="img/rocket.svg" class="svg">
							j2js
						</h1>
					</section>

				</section>
				<section>
					<section>
						<img width=300 src="img/iss.svg" class="svg">
						<h1>Architektur</h1>
					</section>
					<section>
						<h2>Architektur</h2>
						<div>
							<img width="302" src="img/rocket_back.svg" class="svg fragment current-grow visible" data-fragment-index="1">
							<img width="136" src="img/rocket_middle.svg" class="svg fragment current-grow visible" data-fragment-index="2">
							<img width="136" src="img/rocket_front.svg" class="svg fragment current-grow visible" data-fragment-index="3">
						</div>
							<h3 class="fragment" data-fragment-index="1" style="float:left">Parser</h3>
							<h3 class="fragment" data-fragment-index="3" style="float:right">Generator</h3>
							<h3 class="fragment" data-fragment-index="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transpiler</h3>
							<span class="fragment"></span>
					</section>
					<section>
						<h2>Parser</h2>
						<img width="300" src="img/rocket_back.svg" class="svg" style="float:left; padding:20px; transform: rotate(-90deg);">
						<p style="text-align:left">
						Überführt den Quelltext in einen abstrakten Syntaxbaum (AST)
						</p>
						<ul>
							<li>ANTLR4</li>
							<li>Java7 Grammatik</li>
						</ul>
					</section>

					<section>
						<h2>Transpiler</h2>
						<img width="200" src="img/rocket_middle.svg" class="svg" style="float:left; padding:20px; transform: rotate(-90deg);">
						<p style="text-align:left">
						Transformiert den den Java AST in einen JavaScript AST
						</p>
						<ul>
							<li>Visitor Pattern</li>
						</ul>
					</section>

					<section>
						<h2>Generator</h2>
						<img width="200" src="img/rocket_front.svg" class="svg" style="float:left; padding:20px; transform: rotate(-90deg);">
						<p style="text-align:left">
						Erzeugt aus dem JavaScript AST eine Sourcecoderepräsentation
						</p>
						<ul>
							<li>generisch</li>
							<li>escodegen</li>
						</ul>
					</section>

				</section>

				<section>
					<section>
						<img width=400 src="img/lander.svg" class="svg">
						<h1>Demo</h1>
					</section>
					<section>
						<textarea id="ed" cols=80 rows=20 style="font-family:Courier; font-size:20px; overflow:scroll"> /*
 * ProcessingDemo.java
 *
 * Example file
 */

class ProcessingDemo extends Processing {
	double centerX;
	double maxArmLength;

	ProcessingDemo(Element canvas) {
		super(canvas, new Function("p",
			"p.draw = ProcessingDemo.prototype.draw;"+
			"p.setup = ProcessingDemo.prototype.setup"));
	}

	// Setup the Processing Canvas
	public void setup(){
		this.size(640, 480);
	}

	// Main draw loop
	public void draw(){
		this.centerX = this.width / 2;
		this.centerY = this.height / 2;
		this.maxArmLength = Math.min(this.centerX, this.centerY);
		Date now = new Date();

		this.background(224);

		double hoursPosition = (now.getHours() % 12 + now.getMinutes() / 60) / 12;
		drawArm(hoursPosition, 0.5, 5);

		double minutesPosition = (now.getMinutes() + now.getSeconds() / 60) / 60;
		drawArm(minutesPosition, 0.80, 3);

		double secondsPosition = now.getSeconds() / 60;
		drawArm(secondsPosition, 0.90, 1);
	}

	private void drawArm(double position, double lengthScale, double weight) {
		this.strokeWeight(weight);
		this.line(this.centerX, this.centerY,
			this.centerX + Math.sin(position * 2 * Math.PI) * lengthScale * this.maxArmLength,
			this.centerY - Math.cos(position * 2 * Math.PI) * lengthScale * this.maxArmLength);
	}


}
</textarea><br>
						<button onclick="myUpdate();Reveal.down();">Update</button>
					</section>
					<section>
						<canvas id=canvas></canvas>
					</section>
				</section>

				<section>
					<section>
						<img width=400 src="img/hubble.svg" class="svg">
						<h1>Ausblick</h1>
					</section>

					<section>
						<h2>Ausblick</h2>
						<ul>
							<li class="fragment">Kompletes Metamodel des Klassenbaumes</li>
							<li class="fragment">On the fly Refactorings</li>
							<li class="fragment">Java Implementation</li>
							<li class="fragment">sich selbst nach JavaScript übersetzen</li>
						</ul>
					</section>

				</section>

				<section>
					<section>
						<img width=400 src="img/pioneer.svg" class="svg">
						<h1>Fragen?</h1>
					</section>
					<section>
						<h1>Danke!</h1>
					</section>
				</section>

			</div>
		</div>

		<script>
function myUpdate() {
	var jsrc = document.getElementById("ed").value;
	var jtree = java2js.parse(jsrc);
	var jstree = java2js.transpile(jtree);
	var jssrc = java2js.genCode(jstree);

	if(window.p)
		window.p.noLoop();
	var pre =
		"var System = {\n" +
		"	out: {\n" +
		"		println: function(a) { alert(a.toString()) }\n" +
		"	}\n" +
		"};\n" +
		"var java = {\n" +
		"	lang: {\n" +
		"		String: function(s) { this.toString = function() {return s; }\n" +
		"		}\n" +
		"	}\n" +
		"}\n";
	var post = ";window.ProcessingDemo = ProcessingDemo;window.p = new ProcessingDemo(document.getElementById('canvas'));";
	eval(pre + jssrc + post);
}
		</script>
		<script src="http://gottox.de/java2js/browser.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.6.0/processing.js"></script>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: false,
				history: true,
				slideNumber: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
		<!--
		-->
		<script src="http://tox.ninja:3000/slyde.js">
		</script>
	</body>
</html>
